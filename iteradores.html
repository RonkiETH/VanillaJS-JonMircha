<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // const iterable = [1,2,3,4,5];

        // //Accedemos al iterador del iterable
        // const iterador = iterable[Symbol.iterator]();

        // console.log(iterable);
        // console.log(iterador);

        // console.log(iterador.next());

        // let next = iterador.next();

        // while (!next.done) {
        //     console.log(next.value);
        //     next = iterador.next();
        // }

        // function* iterable() {
        //     yield "hola";
        //     console.log("Hola consola");
        //     yield "hola 2";
        //     console.log("Continuán las instrucciones");
        //     yield "hola 3";
        //     yield "hola 4";
        // }

        // let iterador = iterable();
        // for (let y of iterador) {
        //     console.log(y);
        // }

        // const arr = [...iterable()];
        // console.log(arr);

        // function cuadrado(valor) {
        //     setTimeout(() => {
        //         return console.log({valor, resultado: valor * valor});
        //     }, Math.random() * 1000);
        // }

        // function* generador() {
        //     console.log("Inicia Generator");
        //     yield cuadrado(0);
        //     yield cuadrado(1);
        //     yield cuadrado(2);
        //     yield cuadrado(3);
        //     yield cuadrado(4);
        //     yield cuadrado(5);

        //     console.log("Finaliza Generator");
        // }

        // let gen = generador();

        // for (const yield of gen) {
        //     console.log(yield);
        // }

        // const persona = {
        //     nombre: "",
        //     apellido: "",
        //     edad: 0
        // }

        // const manejador = {
        //     set(obj, prop, valor) {
        //         if (Object.keys(obj).indexOf(prop) === -1) {
        //             return console.error(`La propiedad: "${prop} no existe en el objeto persona"`)
        //         }

        //         if (
        //             (prop === "nombre" || prop === "apellido") && !(/^[A-Za-zNnÁáÉéÍíÓóÚúÜü\s]+$/g.test(valor))
        //         ) {
        //             return console.error(`La propiedad: ${prop} solo acepta letras y espacios en blanco`)
        //         }

        //         obj[prop] = valor;
        //     }
        // }

        // const juan = new Proxy(persona, manejador);
        // juan.nombre = "Juan Ignacio";
        // juan.apellido = "Ronquillo";
        // juan.edad = 21;
        // // juan.twitter = "@Ronkijs"

        // console.log(juan);
        // console.log(persona);

        // let aleatorio = Math.round(Math.random() * 100 + 5);

        // const objUsuarios = {
        //     [`id_${aleatorio}`]: "Valor Aleatorio"
        // }
        // const usuarios = ["Jon", "Irma", "Miguel", "Kala", "Tomi"];

        // console.log(objUsuarios);

        // usuarios.forEach((usuario, index) => objUsuarios[`id_${index}`] = usuario);

        // console.log(objUsuarios);

        console.log(this);
        console.log(window);
        console.log(this === window);

        this.nombre = "Contexto Global";
        console.log(this.nombre);

        function imprimir() {
            console.log(this.nombre);
        }

        imprimir();

        const obj = {
            nombre: "Contexto Objeto",
            imprimir: function() {
                console.log(this.nombre);
            }
        }

        obj.imprimir();

        const obj2 = {
            nombre: "Contexto Objeto 2",
            imprimir
        }

        obj2.imprimir();

        const obj3 = {
            nombre: "Contexto Objeto 3",
            //Mantiene el enlace del contexto donde se creó, la arrow function no maneja su propio scope, por ende el .this lo agarra del contexto en el que se creó.
            imprimir: () => {
                console.log(this.nombre);
            }
        }

        obj3.imprimir();

        //Función constructora con scope propio
        function Persona(nombre) {
            // const that = this;
            this.nombre = nombre;

            // return console.log(this.nombre);

            // return function() {
            //     console.log(that.nombre);
            // }

            return () => console.log(this.nombre);
        }

        let juan = new Persona("Juan");
        juan();
        
    </script>
</body>
</html>